System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,o,s,l,u,c,h,p,f,_,y,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.createClass,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.defineProperty},function(t){s=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.CCInteger,h=t.Node,p=t.Label,f=t.Vec3,_=t.instantiate,y=t.Component},function(t){d=t.PlayerController}],execute:function(){var b,N,S,T,g,I,G,v,C,E,P,m,B;s._RF.push({},"6097aeAgDpB+qoIvAEEJNnu","GameManager",void 0);var L,M,w=l.ccclass,A=l.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(L||(L={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameManager",(b=w("GameManager"),N=A({type:u}),S=A({type:c}),T=A({type:d}),g=A({type:h}),I=A({type:p}),b((C=e((v=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(a(e),"cubePrefab",C,a(e)),i(a(e),"roadLength",E,a(e)),i(a(e),"playerController",P,a(e)),i(a(e),"startMenu",m,a(e)),i(a(e),"stepsLabel",B,a(e)),o(a(e),"_road",[]),o(a(e),"_currentState",M.GS_INIT),e}r(e,t);var s=e.prototype;return s.start=function(){var t;this.currentState=M.GS_INIT,null===(t=this.playerController)||void 0===t||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},s.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerController&&(this.playerController.setInputActive(!1),this.playerController.node.setPosition(f.ZERO)),this.playerController.reset()},s.onStartButtonClicked=function(){this.currentState=M.GS_PLAYING},s.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(L.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===L.BT_NONE?this._road.push(L.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},s.spawnBlockByType=function(t){if(!this.cubePrefab)return null;var e=null;switch(t){case L.BT_STONE:e=_(this.cubePrefab)}return e},s.onPlayerJumpEnd=function(t){this.stepsLabel.string=""+t,this.checkResult(t)},s.checkResult=function(t){t<=this.roadLength?this._road[t]===L.BT_NONE&&(this.currentState=M.GS_INIT):this.currentState=M.GS_INIT},n(e,[{key:"currentState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="0"),setTimeout((function(){e.playerController&&e.playerController.setInputActive(!0)}),.1);break;case M.GS_END:}this._currentState=t}}]),e}(y)).prototype,"cubePrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"roadLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),P=e(v.prototype,"playerController",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(v.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(v.prototype,"stepsLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=v))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,n,o,s,r,u,p,c,a,h,m,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,u=t._decorator,p=t.Animation,c=t.SkeletalAnimation,a=t.input,h=t.Input,m=t.Vec3,_=t.Component}],execute:function(){var l,d,y,P,f,g,v;r._RF.push({},"b63caL6hP9OnpNTPQ/rTZnO","PlayerController",void 0);var S=u.ccclass,A=u.property;t("PlayerController",(l=S("PlayerController"),d=A({type:p}),y=A({type:c}),l((g=i((f=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return i=t.call.apply(t,[this].concat(r))||this,n(o(i),"BodyAnim",g,o(i)),n(o(i),"CocosAnim",v,o(i)),s(o(i),"_startJump",!1),s(o(i),"_jumpStep",0),s(o(i),"_currentJumpTime",0),s(o(i),"_jumpTime",.1),s(o(i),"_currentJumpSpeed",0),s(o(i),"_currentPosition",new m),s(o(i),"_deltaPosition",new m(0,0,0)),s(o(i),"_targetPosition",new m),s(o(i),"_isMoving",!1),s(o(i),"_currentMoveIndex",0),i}e(i,t);var r=i.prototype;return r.start=function(){},r.reset=function(){this._currentMoveIndex=0},r.setInputActive=function(t){t?a.on(h.EventType.MOUSE_UP,this.onMouseUp,this):a.off(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},r.jumpByStep=function(t){this._isMoving||(this._startJump=!0,this._jumpStep=t,this._currentJumpTime=0,this._currentJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._currentPosition),m.add(this._targetPosition,this._currentPosition,new m(this._jumpStep,0,0)),this._isMoving=!0,this.CocosAnim&&(this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump")),this.BodyAnim&&(1===t||2===t&&this.BodyAnim.play("twoStep")),this._currentMoveIndex+=t)},r.onOnceJumpEnd=function(){this._isMoving=!1,this.CocosAnim&&this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._currentMoveIndex)},r.update=function(t){this._startJump&&(this._currentJumpTime+=t,this._currentJumpTime>this._jumpTime?(this.node.setPosition(this._targetPosition),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._currentPosition),this._deltaPosition.x=this._currentJumpSpeed*t,m.add(this._currentPosition,this._currentPosition,this._deltaPosition),this.node.setPosition(this._currentPosition)))},i}(_)).prototype,"BodyAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(f.prototype,"CocosAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=f))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./PlayerController.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});